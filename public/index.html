<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UA‑Honeypot Dashboard</title>

    <!--  Bootstrap + Icons  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-zNDVPCpQxl9yXs4RVD5NqnzGivbUiQx2qKkqkEIVgawdXE+Ydu1j0b8DEkIE0Ey8" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <!--  Custom styles  -->
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
<div class="dashboard container-fluid px-3 py-4">
    <!-- ╭──────────────────────────── Header / summary cards ───────────────────────────╮ -->
    <header class="mb-4" aria-labelledby="dashboard-heading">
        <h1 id="dashboard-heading" class="h2">
            <i class="bi bi-shield-lock" aria-hidden="true"></i>
            UA‑Honeypot Dashboard
        </h1>

        <div class="summary-cards d-flex gap-3" role="status" aria-live="polite">
            <div class="card flex-fill text-center">
                <div class="card-body">
                    <h2 class="h5 card-title">Live Tags</h2>
                    <p class="display-6 mb-0" id="liveCount" aria-live="polite">0</p>
                </div>
            </div>
            <div class="card flex-fill text-center">
                <div class="card-body">
                    <h2 class="h5 card-title">Unverified</h2>
                    <p class="display-6 mb-0" id="unverifiedCount" aria-live="polite">0</p>
                </div>
            </div>
            <div class="card flex-fill text-center">
                <div class="card-body">
                    <h2 class="h5 card-title">Errors</h2>
                    <p class="display-6 mb-0" id="errorCount" aria-live="polite">0</p>
                </div>
            </div>
        </div>
    </header>

    <!-- ╭──────────────────────────── Controls + chart ───────────────────────────────╮ -->
    <main>
        <section class="control-panel row g-4" aria-labelledby="controls-heading">
            <!--  Scan controls  -->
            <div class="col-lg-6">
                <h2 id="controls-heading" class="h3">
                    <i class="bi bi-gear" aria-hidden="true"></i>
                    Scan Controls
                </h2>

                <form id="scanForm" class="vstack gap-3" aria-label="Tag‑scanning controls">
                    <div class="form-floating">
                        <input type="text" name="tag" id="tagInput" class="form-control" placeholder=" " required />
                        <label for="tagInput">Tag ID</label>
                    </div>

                    <div class="form-floating">
                        <input type="url" name="url" id="urlInput" class="form-control" placeholder=" " required />
                        <label for="urlInput">Target URL</label>
                    </div>

                    <!--  WebGL presets  -->
                    <fieldset>
                        <legend class="form-label">WebGL Preset</legend>
                        <input type="hidden" name="webglPreset" id="webglPresetInput" value="windows-pc" />

                        <div class="d-flex gap-2 preset-grid" role="radiogroup">
                            <div class="preset-card active" data-preset="windows-pc" role="radio" aria-checked="true" tabindex="0">
                                <i class="bi bi-pc-display" aria-hidden="true"></i>
                                <span>Windows PC</span>
                            </div>
                            <div class="preset-card" data-preset="macbook-pro" role="radio" aria-checked="false" tabindex="0">
                                <i class="bi bi-laptop" aria-hidden="true"></i>
                                <span>MacBook Pro</span>
                            </div>
                            <div class="preset-card" data-preset="linux-pc" role="radio" aria-checked="false" tabindex="0">
                                <i class="bi bi-terminal" aria-hidden="true"></i>
                                <span>Linux PC</span>
                            </div>
                        </div>

                        <div id="webglDetails" class="preset-details small text-muted mt-2"></div>
                    </fieldset>

                    <div class="row g-3">
                        <div class="col-sm-6">
                            <div class="form-floating">
                                <select name="timezone" id="timezoneInput" class="form-select">
                                    <option value="auto">Auto‑detect</option>
                                    <option value="America/New_York">EST · New York</option>
                                    <option value="America/Chicago">CST · Chicago</option>
                                    <option value="America/Los_Angeles">PST · LA</option>
                                    <option value="Europe/London">GMT · London</option>
                                </select>
                                <label for="timezoneInput">Timezone</label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-floating">
                                <select name="language" id="languageInput" class="form-select">
                                    <option value="auto">Auto‑detect</option>
                                    <option value="en-US">English (US)</option>
                                    <option value="en-GB">English (UK)</option>
                                    <option value="es-ES">Spanish</option>
                                    <option value="fr-FR">French</option>
                                </select>
                                <label for="languageInput">Language</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-floating">
                        <input type="text" name="proxy" id="proxyInput" class="form-control" placeholder=" " />
                        <label for="proxyInput">Proxy (optional)</label>
                    </div>

                    <button type="submit" class="btn btn-primary align-self-start">
                        <i class="bi bi-play-circle" aria-hidden="true"></i>
                        Start Monitoring
                    </button>
                </form>
            </div>

            <!--  Chart  -->
            <div class="col-lg-6">
                <h2 class="h3">
                    <i class="bi bi-pie-chart" aria-hidden="true"></i>
                    Verification Status
                </h2>
                <div class="ratio ratio-1x1 bg-body rounded-3">
                    <canvas id="verificationChart" aria-label="Tag‑verification status chart" role="img"></canvas>
                </div>
            </div>
        </section>

        <!-- ╭──────────────────────────── Activity log ───────────────────────────╮ -->
        <section class="activity-log mt-5" aria-labelledby="activity-heading">
            <h2 id="activity-heading" class="h3">
                <i class="bi bi-list-check" aria-hidden="true"></i>
                Recent Activity
            </h2>
            <div class="table-responsive">
                <table class="table table-striped align-middle">
                    <caption class="visually-hidden">Recent scan activity log</caption>
                    <thead class="table-light">
                    <tr>
                        <th scope="col">Time</th>
                        <th scope="col">Tag</th>
                        <th scope="col">Status</th>
                        <th scope="col">Confidence</th>
                    </tr>
                    </thead>
                    <tbody id="activityLog"></tbody>
                </table>
            </div>
        </section>
    </main>
</div>

<!--  Toast container  -->
<div id="toastContainer" class="toast-container position-fixed bottom-0 end-0 p-3"></div>

<!--  Runtime JS  -->
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
<script src="/js/dashboard.js" defer></script>
</body>
</html>
